{% load static %}
<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dynamic Formset Example</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome Icons -->
    <link href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" rel="stylesheet">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'css/adminlte.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

</head>
<body bgcolor="black">
<section class="content">
    <div class="container-fluid">
        <div class="card-header">
            <h3 class="card-title"><b>DYNAMIC FORMSET EXAMPLE</b></h3>
        </div><!-- /.card-header -->
        <div class="card card-info card-outline">
            <form method="POST" class="form-group" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="element-margin">
                    <h4>ITEM</h4>
                    <div class="form-group">
                        <div class="d-flex flex-column field">
                            <label for="NameInput">NAME</label>
                            {{ form.name }}
                        </div>
                    </div>
                </div>
                <div class="element-margin">
                    <h4>ADDITION A</h4>
                    <div class="card-body">
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th style="width: 10px">#</th>
                                <th>Name</th>
                                <th>Count</th>
                                <th>Type</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{ addition_a_formset.management_form }}
                            {% for form in addition_a_formset %}
                            <div class="addition-b-form-part">
                                <tr>
                                    <td>
                                        {{ form.instance.id }}
                                    </td>
                                    <td>
                                        {{ form.name }}
                                    </td>
                                    <td>
                                        {{ form.count }}
                                    </td>
                                    <td>
                                        {{ form.count_type }}
                                    </td>
                                </tr>
                            </div>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="element-margin">
                    <h4>ADDITION B</h4>
                    <div class="d-flex flex-column justify-content-center">
                        {{ addition_b_formset.management_form }}
                        {% for form in addition_b_formset %}
                        <div class="addition-b-form-part element-margin">
                            <div class="addition-b-form-title-line">
                                <h4># <b class="addition-b-counter">{{ forloop.counter }}</b></h4>
                                <div class="btn btn-danger del-b-form">DEL</div>
                            </div>
                            <div class="form-group">
                                <div class="d-flex flex-column field">
                                    <label for="DescriptionInput">DESCRIPTION</label>
                                    {{ form.description }}
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="d-flex flex-column field">
                                    <label for="DescriptionInput">IMAGE</label>
                                    {{ form.image }}
                                    <!-- Static preview after loading:
                                    <img src="{% if form.instance.image %}{{ form.instance.image.url }}{% else %}{% static 'img/no_icon.png' %}{% endif %}"
                                         alt="..." class="rounded element-margin" height="180" width="180">
                                         -->
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <footer>
                    <div class="text-center">
                        <button type="button" class="btn btn-info" id="add-a-form">ADD ADDITION A</button>
                        <button type="button" class="btn btn-info" id="add-b-form">ADD ADDITION B</button>
                        <button type="submit" class="btn btn-success">SAVE ITEM AND ADDITIONS</button>
                    </div>
                </footer>
            </form>
        </div><!-- /.card -->
    </div><!-- /.container-fluid -->
</section><!-- /.content -->


<!-- REQUIRED SCRIPTS -->
<!-- jQuery -->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
<!-- AdminLTE App -->
<script src="{% static 'js/adminlte.min.js' %}"></script>
<!-- Clone More -->
<script src="{% static 'js/dynamicforms.js' %}"></script>
<script>
let addition_a_prefix = 'addition_a';
let addition_a_form = '.addition-a-form-part';
let addition_a_counter = '.addition-a-counter';
let addition_b_prefix = 'addition_b';
let addition_b_form = '.addition-b-form-part';
let addition_b_counter = '.addition-b-counter';
$('#add-a-form').click(function() { addForm(addition_a_prefix, addition_a_form, addition_a_counter); });
$('.del-a-form').click(function() { delForm(this, addition_a_prefix, addition_a_form, addition_a_counter); });
$('#add-b-form').click(function() { addForm(addition_b_prefix, addition_b_form, addition_b_counter); });
$('.del-b-form').click(function() { delForm(this, addition_b_prefix, addition_b_form, addition_b_counter); });
</script>
</body>
</html>